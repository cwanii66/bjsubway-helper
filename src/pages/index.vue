<!-- eslint-disable no-console -->
<script setup lang="ts" generic="T extends any, O extends any">
import BJSMap from '~/components/BJSMap.vue'
import { sideController, stations } from '~/service/control'

import { Request } from '~/utils'
import { bdSubwayUrl } from '~/constants'

const {
  ruleForm,
  ruleFormRef,
  rules,
  formSize,
  options,
  submitForm,
  resetForm,
  showSearchMessage,
} = sideController

Request.get(bdSubwayUrl).then(() => {
  // console.log(res.subways.l)
})
</script>

<template>
  <aside position-absolute left-3 top-3 z-999 b-1 b-coolgray-3 rounded bg-white p-3>
    <el-form
      ref="ruleFormRef"
      :model="ruleForm"
      :rules="rules"
      label-width="120px"
      class="demo-ruleForm"
      :size="formSize"
      status-icon
      mr-6
      mt-6
    >
      <el-form-item label="请输入起点" prop="start">
        <el-select filterable v-model="ruleForm.start" placeholder="Select start point...">
          <el-option v-for="point in stations" :key="point.key" :label="point.name" :value="point.name" />
        </el-select>
      </el-form-item>
      <el-form-item label="请输入终点" prop="end">
        <el-select filterable v-model="ruleForm.end" placeholder="Select end point...">
          <el-option v-for="point in stations" :key="point.key" :label="point.name" :value="point.name" />
        </el-select>
      </el-form-item>
      <el-form-item label="请选择策略" prop="plan">
        <el-select-v2
          v-model="ruleForm.plan"
          placeholder="请选择路线策略..."
          :options="options"
        />
      </el-form-item>
      <el-form-item>
        <el-button type="primary" @click="submitForm(ruleForm), showSearchMessage()">
          查询
        </el-button>
        <el-button @click="resetForm(ruleFormRef)">
          重置
        </el-button>
      </el-form-item>
    </el-form>
  </aside>
  <div class="map-container">
    <BJSMap />
  </div>
</template>
